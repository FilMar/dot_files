# Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.
# Initialization code that may require console input (password prompts, [y/n]
# confirmations, etc.) must go above this block; everything else may go below.


# Variables now defined in env.sh

# Add exports from your profile
if [[ -e ~/.profile ]]; then
    source ~/.profile
fi

### Source shared environment variables from relative path
# First determine CONFIG_HOME to find env.sh
if [[ -e $HOME/MEGA/dot_files/ ]]; then
    CONFIG_HOME="$HOME/MEGA/dot_files"
else
    CONFIG_HOME="$HOME/git_projects/dot_files"
fi
source "$CONFIG_HOME/zsh_files/env.sh"


# Source my zsh config
if [[ -e $ZSH_FILES/zsh/zsh-basic ]]; then
  source $ZSH_FILES/zsh/zsh-basic
fi
# Source for zsh theme 
if [[ -e $ZSH_FILES/zsh/zsh-theme ]]; then
  source $ZSH_FILES/zsh/zsh-theme
fi
# Source for zsh plugins
if [[ -e $ZSH_FILES/zsh/zsh-plugin ]]; then
  source $ZSH_FILES/zsh/zsh-plugin
fi
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
# PATH modification now in env.sh

# Launch Nushell for interactive sessions while keeping zsh as login shell
if [[ $- == *i* ]] && [[ -z "$NU_STARTED" ]] && [[ -n "$PS1" ]]; then
    export NU_STARTED=1
    exec nu
fi
